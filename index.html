<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>frankencover.it by AppsQuickly</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

</head>
<body>
<div id="header">
    <nav>
        <li class="downloads"><a href="https://github.com/appsquickly/FrankenCover">View On GitHub</a></li>
    </nav>
</div>
<!-- end header -->

<div class="wrapper">

    <section>
        <div id="title">
            <h1>frankencover.it</h1>

            <p><a href="http://en.wikipedia.org/wiki/Code_coverage">Code coverage</a> for iOS and OSX. </p>
            <hr>
            <span class="credits right">A project by <a href="http://appsquick.ly">AppsQuickly</a></span>
        </div>

        <p>Generating a code coverage report for iOS and OSX projects requires a mish-mash of tools and steps. Here we've
            glued them all together into something that (hopefully) just works.</p>

        <ul style="padding-bottom: 40px">
            <li>Generates a report with minimal steps.</li>
            <li>Outputs to the terminal as well as produces a detailed report in build-server friendly HTML format.</li>
            <li>Includes a coverage checker. This can be used in CI builds to check minimum test coverage - failing the
                build if coverage falls below the required amount.
            </li>
        </ul>

        <div id="installing>" class="padding-top">
            <h2>INSTALLING</h2>

            <p>The script itself can be run remotely, but we'll first need to install dependencies . . .</p>

            <h4>With Homebrew</h4>

<pre><code>$ brew install groovy
$ brew install lcov
</code></pre>

            <h4>With MacPorts</h4>

<pre><code>$ sudo port install groovy
$ sudo port install lcov
</code></pre>

            <br/>

        </div>

        <div id="usage" class="padding-top">
            <h2>USAGE</h2>

            <p>Set your main App target to produce test coverage output (debug mode only).</p>
            <img src="images/Coverage.png"/>
            <br/><br/>

            <p>Set your main App target to instrument program flow (debug mode only).</p>
            <img src="images/Instrument.png"/>
            <br/><br/>

            <h3 class="padding-top">FROM YOUR IDE</h3>

            <p>Run your tests from Xcode or AppCode, and then produce a coverage report with:</p>
<pre><code>groovy http://frankencover.it/with -source-dir MyProject/Classes
</code></pre>

            <h3 class="padding-top">FROM A BUILD SERVER OR LOCAL CMD-LINE</h3>

            <p>Create a build script, as follows: </p>
        <pre><code>#!/bin/sh
# First Run Tests
xcodebuild test -workspace MyProject.xcworkspace/ -scheme 'MyProject' -configuration Debug \
-destination 'platform=iOS Simulator,name=iPhone 5s,OS=8.1' | xcpretty -c --report junit

#Above we're piping output through xcpretty, which is not required but very nice!
#(gem install xcpretty)

# Now Produce Test Coverage Report
groovy http://frankencover.it/with -source-dir MyProject/Classes -required-coverage 85
#Above we set required coverage to 85%. Build fails if coverage falls below this value.
        </code></pre>

            <p>. . . and run it with</p>
            <pre><code>$ sh build.sh</code></pre>

        </div>


        <div id="output" class="padding-top">
            <h2>OUTPUT</h2>

            <h3 style="padding-top: 20px">Terminal</h3>
            <img src="images/output.png"/>
            <br/><br/>

            <h3>Browser</h3>

            <p>Reports are located at ${outputDir}/coverage/index.html</p>
            <img src="images/report.png"/>
        </div>

        <div style="padding-top: 50px">
            <h2>INSTALLING LOCALLY</h2>
            <p>Using the hosted script has an advantage in that it alleviates the need to update for new features or bug fixes, however if
                you prefer not to run a remote script, it can be installed locally with:</p>

            <pre><code>curl http://frankencover.it/with > FrankenCover && chmod +x FrankenCover</code></pre>

            <p>Alternatively, to review the contents of the script prior to execution, use: </p>
            <pre><code>curl http://frankencover.it/with | more</code></pre>

        </div>

        <div style="padding-top: 50px">
            <h1>LICENSE</h1>

            <p>Apache License, Version 2.0, January 2004, http://www.apache.org/licenses/</p>
        </div>


        <!--[if !IE]>
        <script>fixScale(document);</script><![endif]-->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-57638059-1', 'auto');
            ga('send', 'pageview');

        </script>

    </section>

    <div>
        <h1>ATTRIBUTION</h1>

        <p>The frankencover.it script just moves a bunch of files into the right place and runs some commands on them, hopefully
            saving you the time of having to read the detailed documentation and run manual steps. The real
            heavy-lifting is being done by the awesomeness of <a href="http://clang.llvm.org/">clang</a> and
            <a href="http://ltp.sourceforge.net/coverage/lcov.php">lcov</a>.</p>

        <span class="template-credit">This site is hosted on GitHub pages, and the web template was kindly provided by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
    </div>



</div>
</body>
</html>