<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Frankencover by appsquickly</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

</head>
<body>
<div id="header">
    <nav>
        <li class="downloads"><a href="https://github.com/appsquickly/FrankenCover">View On GitHub</a></li>
        <!--<li class="downloads"><a href="https://github.com/appsquickly/FrankenCover/zipball/master">ZIP</a></li>-->
        <!--<li class="downloads"><a href="https://github.com/appsquickly/FrankenCover/tarball/master">TAR</a></li>-->
        <!--<li class="title">DOWNLOADS</li>-->
    </nav>
</div>
<!-- end header -->

<div class="wrapper">

    <section>
        <div id="title">
            <h1>Frankencover</h1>

            <p>Code coverage for iOS and OSX. </p>
            <hr>
            <span class="credits left">Project maintained by <a href="http://appsquick.ly">AppsQuickly</a></span>
            <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a
                    href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <p>Producing a test coverage report for iOS and OSX projects requires a mish-mash of tools and steps. Here we've
            glued them all together into something that (hopefully) just works.</p>

        <ul style="padding-bottom: 40px">
            <li>Produces an HTML test coverage report with the least possible steps.</li>
            <li>Includes a coverage checker. This can be used in CI builds to check minumum test coverage - failing the
                build if coverage falls below the required amount.
            </li>
        </ul>

        <div id="installing>" class="chapter">
            <h2>Installing</h2>

            <p>The script itself can be run remotely, but we'll first need to install dependencies . . .</p>

            <h4>With Homebrew</h4>

<pre><code>$ brew install groovy
$ brew install lcov
</code></pre>

            <h4>With MacPorts</h4>

<pre><code>$ sudo port install groovy
$ sudo port install lcov
</code></pre>

            <br/>

        </div>

        <div id="usage" class="chapter">
            <h2>Usage</h2>

            <p>Set your main App target to produce test coverage output (debug mode only).</p>
            <img src="images/Coverage.png"/>
            <br/><br/>

            <p>Set your main App target to instrument program flow (debug mode only).</p>
            <img src="images/Instrument.png"/>
            <br/><br/>

            <p>Run your tests from Xcode or AppCode, and then produce a coverage report with:</p>
<pre><code>groovy http://frankencover.it/with -source-dir MyProject/Classes -output-dir build/reports
    -required-coverage 80
</code></pre>

            <p>Alternatively, create a build script. . . </p>
        <pre><code>#!/bin/sh
# First Run Tests
xcodebuild test -workspace MyProject.xcworkspace/ -scheme 'MyProject' -configuration Debug \
-destination 'platform=iOS Simulator,name=iPhone 5s,OS=8.1' | xcpretty -c --report junit
#Above we are piping the build output through xcpretty, which is not required, but very nice.
#(gem install xcpretty)

# Now Produce Test Coverage Report
groovy http://frankencover.it/with -source-dir MyProject/Classes -output-dir build/reports
-required-coverage 80
        </code></pre>

            <p>. . . and run it with</p>
            <pre><code>$ sh build.sh</code></pre>

        </div>

        <div id="output" class="chapter">
            <h2>Output</h2>

            <h3>Cmd-line</h3>
            <img src="images/output.png"/>
            <br/><br/>

            <h3>Browser</h3>
            <p>Reports are located at ${outputDir}/coverage/index.html</p>
            <img src="images/Report.png"/>
        </div>


        <!--[if !IE]>
        <script>fixScale(document);</script><![endif]-->
    </section>

    <div>
        <h1>Attribution</h1>
        <p>This script just moves a bunch of files into the right place and runs some commands on them, hopefully
            saving you the time of having to read the detailed documentation and run manual steps. The real
            heavy-lifting is being done by the awesomeness of <a href="http://clang.llvm.org/">clang</a> and
            <a href="http://ltp.sourceforge.net/coverage/lcov.php">lcov</a>.</p>
    </div>
    </div>
</body>
</html>